<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Continuous Flow Examples • isoprocessor</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Continuous Flow Examples">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-106138361-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-106138361-4');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">isoprocessor</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="in active development">0.3.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/dual_inlet.html">Dual Inlet</a>
</li>
<li>
  <a href="../articles/continuous_flow.html">Continuous Flow</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/isoverse/isoprocessor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Continuous Flow Examples</h1>
            
            <h4 class="date">2019-05-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/isoverse/isoprocessor/blob/master/vignettes/continuous_flow.Rmd"><code>vignettes/continuous_flow.Rmd</code></a></small>
      <div class="hidden name"><code>continuous_flow.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Isoprocessor supports several plotting and data conversion functions specifically for continuous flow data. This vignette shows some of the functionality for continuous flow files read by the <a href="http://isoreader.isoverse.org">isoreader package</a> (see the <a href="http://isoreader.isoverse.org/articles/continuous_flow.html">corresponding vignette</a> for details on data retrieval, storage and export).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># load isoreader and isoprocessor packages</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(isoreader)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(isoprocessor)</a></code></pre></div>
</div>
<div id="reading-files" class="section level1">
<h1 class="hasAnchor">
<a href="#reading-files" class="anchor"></a>Reading files</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># read a few of the continuous flow examples provided with isoreader</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">iso_files &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/isoreader/topics/iso_read_continuous_flow">iso_read_continuous_flow</a></span>(</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="kw"><a href="https://www.rdocumentation.org/packages/isoreader/topics/iso_get_reader_example">iso_get_reader_example</a></span>(<span class="st">"continuous_flow_example.cf"</span>),</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="kw"><a href="https://www.rdocumentation.org/packages/isoreader/topics/iso_get_reader_example">iso_get_reader_example</a></span>(<span class="st">"continuous_flow_example.iarc"</span>),</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    <span class="kw"><a href="https://www.rdocumentation.org/packages/isoreader/topics/iso_get_reader_example">iso_get_reader_example</a></span>(<span class="st">"continuous_flow_example.dxf"</span>),</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="kw"><a href="https://www.rdocumentation.org/packages/isoreader/topics/iso_get_reader_example">iso_get_reader_example</a></span>(<span class="st">"linearity_example.dxf"</span>)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">  )</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; Info: preparing to read 4 data files (all will be cached)...</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; Info: reading file 'continuous_flow_example.cf' from cache...</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; Info: reading file 'continuous_flow_example.iarc' from cache...</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; Info: reading file 'continuous_flow_example.dxf' from cache...</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; Info: reading file 'linearity_example.dxf' from cache...</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; Info: finished reading 4 files in 0.44 secs</span></a></code></pre></div>
</div>
<div id="chromatograms" class="section level1">
<h1 class="hasAnchor">
<a href="#chromatograms" class="anchor"></a>Chromatograms</h1>
<p>Plotting the raw data (i.e. the mass chromatograms) can be done either with the generic <code><a href="../reference/iso_plot_raw_data.html">iso_plot_raw_data()</a></code> function for a simple plot with default parameters, or directly using the continuous flow specific <code>iso_plot_continuous_flow()</code> which can be highly customized. Note that the following plot shows the data from all files in their originally recorded signal intensity units. For examples of how to convert to a common unit, see the section on <strong>Signal conversion</strong> further down.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">iso_files <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>()</a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/all%20data-1.png" width="960"></p>
<p>All customization options are described in the function help (<code><a href="../reference/iso_plot_continuous_flow_data.html">?iso_plot_continuous_flow_data</a></code>) and include, for example, plotting only a specific subset of masses (which will omit data from files that don’t include this mass):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="co"># plot just masses 2, 44 and 45</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>(</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">data =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"2"</span>, <span class="st">"44"</span>, <span class="st">"45"</span>)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  )</a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/select%20masses-1.png" width="960"></p>
</div>
<div id="peak-labels" class="section level1">
<h1 class="hasAnchor">
<a href="#peak-labels" class="anchor"></a>Peak Labels</h1>
<p>Since peak information is often key for interpretating chromatograms, the <code>iso_plot_continuous_flow_data</code> function also provides a suite of peak data integration parameters that make it easy to highlight peaks in the chromatogram and label them with any number of desired information. For example, the following code illustrates how the <code>vendor_data_table</code> provided by some file formats can be used as a source for this information:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>(</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="co"># select which data to plot and how to plot it</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="dt">data =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"2"</span>, <span class="st">"3"</span>), <span class="dt">color =</span> data, <span class="dt">panel =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="co"># provide source for peak information</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">    <span class="dt">peak_table =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/isoreader/topics/iso_get_vendor_data_table">iso_get_vendor_data_table</a></span>(iso_files),</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">    <span class="co"># specify the names of key columns in the peak_table </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">    <span class="dt">rt =</span> Rt, <span class="dt">rt_start =</span> Start, <span class="dt">rt_end =</span> End,</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">    <span class="co"># specify what to label the peaks with</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="dt">peak_label =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sprintf">sprintf</a></span>(<span class="st">"rt=%.0f"</span>, Rt),</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">    <span class="dt">peak_label_size =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">    <span class="co"># specify which labels to display (only the 2 trace, between 500 and 1500s)</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13">    <span class="dt">peak_label_filter =</span> data <span class="op">==</span><span class="st"> "2 [mV]"</span> <span class="op">&amp;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span>(time.s, <span class="dv">500</span>, <span class="dv">1500</span>)</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">  )</a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; Info: aggregating vendor data table without units from 7 data file(s)</span></a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/with_peak_labels-1.png" width="864"></p>
</div>
<div id="isotope-ratios" class="section level1">
<h1 class="hasAnchor">
<a href="#isotope-ratios" class="anchor"></a>Isotope ratios</h1>
<p>Raw data typically only includes ion signals but isotope ratios are often needed to calculate and visualize the data. For this purpose, isoreader provides a dynamic ratio calculation function (<code><a href="../reference/iso_calculate_ratios.html">iso_calculate_ratios()</a></code>) that accepts any combination of masses, here demonstrated for the standard CO2 ratios <span class="math inline">\(\frac{46}{44}\)</span> and <span class="math inline">\(\frac{45}{44}\)</span>. Additionally, the following example demonstrates how the <code>filter</code> parameter can be used to exclude plotting artifacts (here e.g. the extreme ratio values seen right after the magnet jump). Notice how the ratios calculated from current intensities are close to 0 (as the real ratios likely are) whereas those calculated from voltages are close to 1 (due to the so chosen, different resistors in the detector circuit). See the section on <strong>Signal conversion</strong> further down on how to scale to uniform intensity units to address this comparison obstacle.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">iso_files &lt;-</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span>iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="co"># calculate 46/44 and 45/44 ratios</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/iso_calculate_ratios.html">iso_calculate_ratios</a></span>(<span class="dt">ratios =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"46/44"</span>, <span class="st">"45/44"</span>))</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; Info: calculating ratio(s) in 7 data file(s): 46/44, 45/44</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>(</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">    <span class="co"># visualize ratios along with main ion</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">    <span class="dt">data =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"44"</span>, <span class="st">"45/44"</span>, <span class="st">"46/44"</span>),</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">    <span class="co"># plot all masses but ratios only 0 to 2 to omit peak jump artifacts</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12">    <span class="dt">filter =</span> category <span class="op">==</span><span class="st"> "mass"</span> <span class="op">|</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span>(value, <span class="dv">0</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">  ) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/expand_limits">expand_limits</a></span>(<span class="dt">y =</span> <span class="fl">-0.3</span>)</a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/ratios-1.png" width="960"></p>
</div>
<div id="time-conversion" class="section level1">
<h1 class="hasAnchor">
<a href="#time-conversion" class="anchor"></a>Time conversion</h1>
<p>Most continuous flow data is reported in time units of seconds but this is not always the most useful unit. Isoreader provides easy time scaling functionality that will work for all standard time units (minutes, hours, days, etc.) regardless of which time units individual isofiles were initially recorded in.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">iso_files &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span>iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="co"># convert to minutes</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/iso_convert_time.html">iso_convert_time</a></span>(<span class="dt">to =</span> <span class="st">"minutes"</span>) </a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; Info: converting time to 'minutes' for 7 continuous flow data file(s)</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="st">  </span><span class="co"># plot masses 2 and 3</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>(<span class="dt">data =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">3</span>))</a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/time%20conversion-1.png" width="960"></p>
<p>In this context, another useful customization option of the plotting function is the option to select a specific time window (in any time units, regardless of what is plotted), and the possibility to adjust plot aesthetics such as color, linetype, and paneling:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="co"># calculate 3/2 ratio on the file</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/iso_calculate_ratios.html">iso_calculate_ratios</a></span>(<span class="st">"3/2"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>(</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">    <span class="co"># replot masses 2 and 3 together with the ratio for a specific time window</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">    <span class="dt">data =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"3/2"</span>),</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">    <span class="dt">time_interval =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">10</span>, <span class="dv">13</span>),</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">    <span class="dt">time_interval_units =</span> <span class="st">"minutes"</span>,</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">    <span class="co"># adjust plot aesthetics to panel by masses vs. ratios and color by traces</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">    <span class="dt">panel =</span> category,</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">    <span class="dt">color =</span> data</a>
<a class="sourceLine" id="cb8-12" data-line-number="12">  )</a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; Info: calculating ratio(s) in 7 data file(s): 3/2</span></a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/time%20window-1.png" width="960"></p>
</div>
<div id="signal-conversion" class="section level1">
<h1 class="hasAnchor">
<a href="#signal-conversion" class="anchor"></a>Signal conversion</h1>
<p>Likewise, isoreader can convert between different signal units. This is particularly useful for comparing data files from different mass specs that record signals differentally. The earlier plot of mass 44 illustrated this scenario where some data was recorded in mV and some in nA. Voltages and currents can be scaled within each unit without restriction and with any valid SI prefix (e.g. from mV to V or nA to pA), however, for conversion from voltage to current or vice-versa, the appropriate resistor values need to be provided or be available from the data files themselves. The following is an example of scaling from voltage to current with the resistor values automatically read from the original data files (see file information section for details). Notice how the mass 44 signal is now in the same units for all files and the ratios are on comparable scales because they are calculated from the same unit intensities:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="co"># convert all signals to nano ampere</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/iso_convert_signals.html">iso_convert_signals</a></span>(<span class="dt">to =</span> <span class="st">"nA"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="co"># re-calculate ratios with the new unuts</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/iso_calculate_ratios.html">iso_calculate_ratios</a></span>(<span class="dt">ratios =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"46/44"</span>, <span class="st">"45/44"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">  </span><span class="co"># re-plot same plot as earlier</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>(</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">    <span class="dt">data =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"44"</span>, <span class="st">"45/44"</span>, <span class="st">"46/44"</span>),</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">    <span class="dt">filter =</span> </a>
<a class="sourceLine" id="cb9-10" data-line-number="10">      category <span class="op">==</span><span class="st"> "mass"</span> <span class="op">|</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="st">      </span>(data <span class="op">==</span><span class="st"> "45/44"</span> <span class="op">&amp;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span>(value, <span class="fl">0.005</span>, <span class="fl">0.03</span>)) <span class="op">|</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="st">      </span>(data <span class="op">==</span><span class="st"> "46/44"</span> <span class="op">&amp;</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/between.html">between</a></span>(value, <span class="dv">0</span>, <span class="fl">0.012</span>))</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  )</a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; Info: converting signals to 'nA' for 7 continuous flow data file(s) with automatic resistor values from individual iso_files (if needed for conversion)</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt; Info: calculating ratio(s) in 7 data file(s): 46/44, 45/44</span></a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/signal%20conversion-1.png" width="960"></p>
</div>
<div id="plot-styling" class="section level1">
<h1 class="hasAnchor">
<a href="#plot-styling" class="anchor"></a>Plot styling</h1>
<p>Since all isoreader plots are standard <a href="http://ggplot2.tidyverse.org/">ggplot</a> objects, they can be modified with any ggplot commands. For example to modify the themes:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 3.5.2</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">iso_files <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="co"># replot</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/iso_plot_continuous_flow_data.html">iso_plot_continuous_flow_data</a></span>(<span class="dt">data =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>,<span class="dv">3</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="st">  </span><span class="co"># add vertical dashed line (ggplot functionality)</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/geom_abline">geom_vline</a></span>(<span class="dt">xintercept =</span> <span class="dv">15</span>, <span class="dt">linetype =</span> <span class="dv">2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="st">  </span><span class="co"># modify plot styling (ggplot functionality)</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/theme">theme</a></span>(<span class="dt">text =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/element">element_text</a></span>(<span class="dt">size =</span> <span class="dv">20</span>),</a>
<a class="sourceLine" id="cb10-10" data-line-number="10">        <span class="dt">legend.position =</span> <span class="st">"none"</span>)</a></code></pre></div>
<p><img src="continuous_flow_files/figure-html/styling-1.png" width="960"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#reading-files">Reading files</a></li>
      <li><a href="#chromatograms">Chromatograms</a></li>
      <li><a href="#peak-labels">Peak Labels</a></li>
      <li><a href="#isotope-ratios">Isotope ratios</a></li>
      <li><a href="#time-conversion">Time conversion</a></li>
      <li><a href="#signal-conversion">Signal conversion</a></li>
      <li><a href="#plot-styling">Plot styling</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sebastian Kopf.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
